
# WIL - Ioc, DI, Bean
- 2022.07.31

## ❓ [Ioc (Inversion of Control)]
- 📌 우리말로 번역하면 __제어의 역전__ 정도로 번역할 수 있을 것 같다.<br>
- 흔히 IoC를 설명할 때 할리우드 원칙을 들어서 설명하곤 한다. 배우들(객체)에게 영화사에서 필요하면 연락할테니 먼저 연락하지 말라는 뜻이다.<br>
- 우리가 그동안 작성해왔던 일반적인 프로그램을 생각해보자. 객체의 생명주기(생성,초기화,소멸,메소드 호출)를 클라이언트 구현 객체가 직넙 관리한다.<br>
- 또한 다른 사람이 작성한 외부 코드(라이브러리)를 호출하더라도 해당 코드의 호출 시점 역시 직접 관리한다. 하지만 이러한 생명주기를 직접 관리하지 않는 경우라면?<br>
- 스프링과 같은 프레임워크를 사용할 때를 생각해보자. Controller, Service 같은 객체들의 동작을 우리가 직접 구현하기는 하지만, 해당 객체들이 어느 시점에 호출될 지는 신경쓰지 않는다.<br>
- 프레임워크가 해당 객체들을 가져다가 생성하고, 메서드를 호출하고, 소멸시킨다. 프로그램의 제어권이 역전된 것이다.<br>
-----
> 그렇다면 IoC라는 개념을 도입함으로써 무엇을 얻을 수 있을까?<br>
> **__1. 프로그램의 진행 흐름과 구체적인 구현을 분리시킬수 있다.__**<br>
> **__2. 개발자는 비즈니스 로직에 집중할 수 있다.__**<br>
> **__3. 구현체 사이의 변경이 용이하다.__**<br>
> **__4. 객체 간 의존성이 낮아진다.__**<br>
------

## ❓ [DI (Dependency Injection)] 
- 📌 흔히들 IoC와 DI를 헷갈려하거나, 동일시하고는 한다. 하지만 사실 IoC와 DI는 다른 개념이다.<br>
- __절대 IoC == DI가 아니다__ DI 없이도 IoC를 만족하는 프로그램을 만들 수 있다.<br>
- IoC는 프로그램 제어권을 역전시키는 개념이고 DI는 해당 개념을 구현하기 위해 사용하는 디자인 패턴 중 하나로,<br>
- 이름 그대로 객체의 의존관계를 외부에서 주입시키는 패턴을 말한다.<br>
- **__의존성이란? 의존대상 B가 변하면, 그것이 A에 영향을 미친다.__**<br>
- 의존성 주입에는 세 가지 주요 스타일이 있다. <br>
-----
> **__1. 생성자 주입__**<br>
> **__2. Setter 주입 (Setter주입과 인터페이스 주입은 아직 크게 뭐가 다른지 모르겟다.)__**<br> 
> **__3. 필드 주입__**<br>
-----
- 그렇다면 DI를 사용하면 어떤 장점이 있을까?<br>
-----
> **__1. 의존성이 줄어든다.__**<br>
> **__2. 모의 객체를 주입할 수 있기 때문에 단위 테스트가 쉬워진다.__**<br>
> **__3. 가독성이 높아진다.__**<br>
> **__4. 재사용성이 높아진다.__**<br>
------

## ❓ [Bean]
- 📌 빈이란? 스프링 컨테이너가 관리하는 자바 객체를 빈이라고 한다.<br>
- IoC가 적용된 경우에는 이러한 객체의 생성과 사용자의 제어권을 스프링에게 넘긴다.<br>
- 사용자는 직접 new를 이용해 사용한 객체를 사용하지 않고, 스프링에 의하여 관리당하는 자바 객체를 사용한다.<br>
- 이 객체를 bean이라고 한다.
- **__그렇다면 스프링 Bean을 스프링 컨테이너에 등록하는 방법은?__**
-----
> **__1. @Component 어노테이션이 있으면 스프링 빈으로 자동 등록된다.__**<br>
> 또한 @Component를 포함하는 @Controller, @Service, @Repository 어노테이션도 스프링 빈으로 자동 등록된다.<br>
> **__2. @Autowired --> 생성자에 @Autowired가 있으면 스프링이 연관된 객체를 스프링 컨테이너에 찾아서 넣어준다.__**<br>
> 참고로 스프링은 스프링 컨테이너에 스프링 빈을 등록할 때, 기본으로 싱글톤(유일하게 하나만 등록해서 공유한다.) 따라서 같은 스프링 빈이면 모두 같은 인스턴스다.<br>
> 설정으로 싱글톤이 아니게 설정할 수 있지만, 특별한 경우를 제외하면 대부분 싱글톤이다.<br>
> **__3. @Configuration과 @Bean 어노테이션을 이용해 스프링 bean으로 등록한다.__**<br>
> @Configurtaion을 이용하면 스프링 프로젝터에서 Configuration 역할을 하는 Class를 지정할 수 있다.<br>
------

